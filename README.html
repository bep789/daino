<!DOCTYPE html>
<html>
<head>
<style>
body { background:#222; color:white; text-align:center; font-family:Arial; }
canvas { background:#333; margin-top:20px; }
button { padding:10px 20px; margin:10px; font-size:16px; }
</style>
</head>
<body>

<h2>Dino Game</h2>
<h3>Score: <span id="score">0</span></h3>
<h3>High Score: <span id="highScore">0</span></h3>

<canvas id="game" width="400" height="150"></canvas><br>
<button onclick="jump()">JUMP</button>
<button onclick="stopGame()">STOP</button>

<script>
let canvas = document.getElementById("game");
let ctx = canvas.getContext("2d");

function draw(dinoY, cactusX) {

  ctx.clearRect(0,0,400,150);

  // ground
  ctx.fillStyle="white";
  ctx.fillRect(0,120,400,5);

  // dino
  ctx.fillRect(50, dinoY==1 ? 80 : 100, 20,20);

  // cactus
  ctx.fillRect(20*cactusX,100,10,20);
}

function jump(){
  ArduinoCloud.write("jump", true);
}

function stopGame(){
  ArduinoCloud.write("stopGame", true);
}

// รับค่าจาก Cloud
ArduinoCloud.onUpdate = function(data){
  document.getElementById("score").innerText = data.score;
  document.getElementById("highScore").innerText = data.highScore;

  if(data.gameState && data.gameState.includes(",")){
    let parts = data.gameState.split(",");
    draw(parseInt(parts[0]), parseInt(parts[1]));
  }
}
</script>

</body>
</html>
